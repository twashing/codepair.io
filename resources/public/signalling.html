<!DOCTYPE html>
<html>
  <head>
    <meta name='keywords' content='Programming, Tools, JavaScript' />
    <meta name='description' content='Simple Online Pair Programming' />
    <meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1'>

    <script>
      var PeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;
      var SessionDescription = window.RTCSessionDescription || window.mozRTCSessionDescription || window.webkitRTCSessionDescription;
      var GET_USER_MEDIA = navigator.getUserMedia ? "getUserMedia" :
                           navigator.mozGetUserMedia ? "mozGetUserMedia" :
                           navigator.webkitGetUserMedia ? "webkitGetUserMedia" : "getUserMedia";
      var v = document.createElement("video");
      var SRC_OBJECT = 'srcObject' in v ? "srcObject" :
                       'mozSrcObject' in v ? "mozSrcObject" :
                       'webkitSrcObject' in v ? "webkitSrcObject" : "srcObject";

      var pc = new webkitRTCPeerConnection({ "iceServers": [{ "url": "stun:stun.l.google.com:19302" }] });
      pc.onaddstream = function(obj) {
        var vid = document.getElementById("localVideo");
        vid.srcObject = obj.stream;
      }

      // Helper functions
      function endCall() {
      
        var videos = document.getElementsByTagName("video");
        for (var i = 0; i < videos.length; i++) {
          videos[i].pause();
        }
	pc.close();
      }
			   
      function error(err) { endCall(); }
    </script>
  </head>

  <body>

    <div id='container'>

      <div id='videos'>
	<video id='localVideo' autoplay muted></video>
	<video id='remoteVideo' autoplay></video>
      </div>

      <div id='textareas'>
	<textarea id="dataChannelSend" disabled placeholder="Press Start, enter some text, then press Send."></textarea>
	<textarea id="dataChannelReceive" disabled></textarea>
      </div>

      <button id="sendButton" disabled>Send</button>

    </div>

  </body>
</html>
